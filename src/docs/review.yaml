tags:
  - name: Reviews
    description: 도서 리뷰 및 댓글 관리

paths:
  /reviews:
    get:
      summary: 리뷰 목록 조회
      tags: [Reviews]
      parameters:
        - in: query
          name: bookId
          required: true
          schema:
            type: integer
          description: 도서 ID
          example: 1
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: size
          schema:
            type: integer
            default: 10
      responses:
        200:
          description: 리뷰 목록 반환
    post:
      summary: 리뷰 등록
      tags: [Reviews]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - bookId
                - rating
                - content
              properties:
                bookId:
                  type: integer
                  example: 1
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
                  example: 5
                content:
                  type: string
                  example: "이 책 정말 추천합니다! 많은 도움이 되었어요."
      responses:
        201:
          description: 리뷰 등록 성공

  /reviews/{id}:
    delete:
      summary: 리뷰 삭제
      tags: [Reviews]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          example: 100
      responses:
        200:
          description: 리뷰 삭제 성공

  /reviews/{id}/likes:
    post:
      summary: 리뷰 좋아요 토글
      tags: [Reviews]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: 리뷰 ID
          example: 100
      responses:
        200:
          description: 좋아요 추가/취소 성공

  /reviews/{id}/comments:
    get:
      summary: 리뷰 댓글 목록 조회
      tags: [Reviews]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: 리뷰 ID
          example: 100
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: size
          schema:
            type: integer
            default: 20
      responses:
        200:
          description: 댓글 목록 반환
    post:
      summary: 댓글 등록
      tags: [Reviews]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: 리뷰 ID
          example: 100
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                  example: "저도 동감합니다. 특히 예제가 좋았어요."
      responses:
        201:
          description: 댓글 등록 성공

  /reviews/comments/{id}:
    delete:
      summary: 댓글 삭제
      tags: [Reviews]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: 댓글 ID
          example: 50
      responses:
        200:
          description: 댓글 삭제 성공

  /reviews/comments/{id}/likes:
    post:
      summary: 댓글 좋아요 토글
      tags: [Reviews]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: 댓글 ID
          example: 50
      responses:
        200:
          description: 좋아요 추가/취소 성공